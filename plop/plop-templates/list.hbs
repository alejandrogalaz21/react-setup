import React, { useEffect } from 'react'
import { connect } from 'react-redux'
import { columns } from './{{camelCase name}}.helpers'
import { {{camelCase name}}Actions } from './{{camelCase name}}.redux'
import Banner from 'layouts/Site/Layouts/Banner'
import TableContainer from 'components/Container/TableContainer'
import DataTable from 'components/Table/Table'
import { useExportSelected } from 'hooks/useExportSelected'

function {{pascalCase name}}List(props) {
  const [selectRow, handleExport] = useExportSelected('{{pascalCase name}}', '/api/{{camelCase name}}/export')

  useEffect(() => {
    props.loadAll{{pascalCase name}}()
  }, [])

  const rowEvents = {
    onClick: (e, row) => {
      props.history.push(`/dashboard/{{camelCase name}}/view/${row._id}`)
    }
  }

  return (
  <Banner>
    <TableContainer title='{{pascalCase name}}' subtitle='Lista' route='/dashboard/{{camelCase name}}/create' module='{{pascalCase name}}'>
      <DataTable {...props} rowEvents={rowEvents} data={props.{{camelCase name}}\} structure={columns} onExport={handleExport}
        selectRow={selectRow} selected={selectRow.selected} />
    </TableContainer>
  </Banner>
  )
}

const mapStateToProps = ({ {{camelCase name}} }) => ({ {{camelCase name}}: {{camelCase name}}.list })
const mapDispatchToProps = {
  loadAll{{pascalCase name}}: {{camelCase name}}Actions.loadAll{{pascalCase name}}Request,
  toggle{{pascalCase name}}: {{camelCase name}}Actions.toggle{{pascalCase name}}Request
}

export default connect(mapStateToProps, mapDispatchToProps)({{pascalCase name}}List)