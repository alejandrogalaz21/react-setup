import React, { useEffect } from 'react'
import { connect } from 'react-redux'
import { {{camelCase name}}Actions } from './{{camelCase name}}.redux'
import { isEmpty } from './../../util/crud'
import {{pascalCase name}}Form from './{{pascalCase name}}Form'
import Banner from 'layouts/Site/Layouts/Banner'

function {{pascalCase name}}(props) {
  useEffect(function() {
    const { id } = props.match.params
    props.edit{{pascalCase name}}Request({ id })
    props.edit{{pascalCase name}}Success()
  })

  const onCancel = () => {
    props.history.push('/dashboard/{{camelCase name}}/list')
  }

  const submit = values => {
    const { id } = props.match.params
    props.update{{pascalCase name}}({ id, values })
  }

  const values = props.{{camelCase name}}.edit

  return (
  <Banner>
    {!isEmpty(values) && (
    < {{pascalCase name}} Form {...props} label='Actualizar' button='edit' onCancel={onCancel} onSubmit={submit}
      initialValues={values} />
    )}
  </Banner>
  )
}

const mapStateToProps = ({ {{camelCase name}} }) => ({ {{camelCase name}} })
  const mapDispatchToProps = {
    update{{pascalCase name}}: {{camelCase name}}Actions.update{{pascalCase name}}Request,
    edit{{pascalCase name}}Request: {{camelCase name}}Actions.edit{{pascalCase name}}Request,
    edit{{pascalCase name}}Success: {{camelCase name}}Actions.edit{{pascalCase name}}Success
  }

export default connect(mapStateToProps, mapDispatchToProps)({{pascalCase name}}Edit)